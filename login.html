<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‡∏ú‡∏•‡∏î‡∏µ ‚Ä¢ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</title>

  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family: "Prompt", system-ui, sans-serif;
      background: linear-gradient(160deg,#78e4c7,#4bb8e8);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:22px;
    }

    .card{
      width:100%;
      max-width:430px;
      background:#ffffffcc;
      backdrop-filter:blur(12px);
      border-radius:22px;
      padding:32px;
      box-shadow:0 10px 35px rgba(0,0,0,.15);
      animation:fadein .6s ease;
    }

    @keyframes fadein {
      from {opacity:0; transform:translateY(10px);}
      to   {opacity:1; transform:translateY(0);}
    }

    h1{
      font-size:26px;
      font-weight:700;
      color:#003b32;
      margin-bottom:6px;
      text-align:center;
    }

    .sub{
      font-size:15px;
      color:#1f4037;
      margin-bottom:22px;
      text-align:center;
    }

    .btn{
      width:100%;
      padding:12px;
      border-radius:12px;
      border:0;
      cursor:pointer;
      font-size:15px;
      font-weight:600;
      transition:.2s;
    }

    /* Google button */
    .btn-google{
      background:#fff;
      border:1px solid #d9d9d9;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      margin-bottom:18px;
    }
    .btn-google:hover {background:#f8f8f8;}

    .or{
      display:flex;
      align-items:center;
      gap:10px;
      margin:18px 0;
      color:#555;
      font-size:13px;
    }
    .or::before,.or::after{
      content:"";
      flex:1;
      height:1px;
      background:#dadada;
    }

    label{display:block;margin:10px 0 6px;font-weight:600;color:#003b32}
    input{
      width:100%;
      padding:11px 12px;
      border-radius:10px;
      border:1px solid #cfd8dc;
      font-size:14px;
    }

    .btn-primary{
      background:#007aff;
      color:#fff;
      margin-top:12px;
    }
    .btn-primary:hover{background:#0066d1;}

    .ses-row{
      display:flex;
      gap:12px;
      margin-top:12px;
    }

    .error{
      background:#fdecea;
      border:1px solid #f5c6cb;
      color:#c62828;
      padding:12px;
      margin-top:14px;
      border-radius:10px;
      display:none;
      white-space:pre-line;
      font-size:14px;
    }
    .success{
      background:#e8f5e9;
      border:1px solid #c8e6c9;
      color:#1b5e20;
      padding:12px;
      margin-top:14px;
      border-radius:10px;
      display:none;
      font-size:14px;
    }

    footer{
      margin-top:18px;
      text-align:center;
      font-size:12px;
      color:#003b32;
    }
  </style>
</head>

<body>
  <div class="card">

    <h1>üåøPondee ‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô
</h1>
    <p class="sub">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û & ‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ  
‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô Google ‡πÅ‡∏•‡∏∞‡∏≠‡∏µ‡πÄ‡∏°‡∏• ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏î‡πâ‡∏ß‡∏¢ Firebase Authentication</p>

    <!-- Google Button -->
    <button id="googleBtn" class="btn btn-google">
      <svg width="18" height="18" viewBox="0 0 48 48">
        <path fill="#FFC107" d="M43.6 20.5H42V20H24v8h11.3C33.7 32.1 29.3 35 24 35c-7.2 0-13-5.8-13-13S16.8 9 24 9c3.1 0 5.9 1.1 8 3.1l5.7-5.7C34.5 3.5 29.5 1.5 24 1.5 11.6 1.5 1.5 11.6 1.5 24S11.6 46.5 24 46.5 46.5 36.4 46.5 24c0-1.2-.1-2.3-.3-3.5z"/>
        <path fill="#FF3D00" d="M6.3 14.7l6.6 4.8C14.6 16.2 18.9 13 24 13c3.1 0 5.9 1.1 8 3.1l5.7-5.7C34.5 7.5 29.5 5.5 24 5.5c-7.8 0-14.5 4.5-17.7 11.2z"/>
        <path fill="#4CAF50" d="M24 42.5c5.2 0 10-2 13.5-5.3l-6.2-5.1c-2 1.4-4.6 2.2-7.3 2.2-5.2 0-9.6-3.5-11.2-8.3L6 31.3C9.2 38 16 42.5 24 42.5z"/>
        <path fill="#1976D2" d="M43.6 20.5H42V20H24v8h11.3c-1 2.9-3.1 5.3-5.9 6.8l.1.1 6.2 5.1c-.4.4 8.3-4.9 8.3-16.9 0-1.2-.1-2.3-.4-3.6z"/>
      </svg>
      ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Google
    </button>

    <div class="or">‡∏´‡∏£‡∏∑‡∏≠</div>

    <!-- Email Login -->
    <form id="emailForm">
      <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
      <input id="email" type="email" placeholder="you@example.com" required>

      <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
      <input id="password" type="password" placeholder="‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß" required>

      <div class="ses-row">
        <button class="btn btn-primary" type="submit">‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô</button>
        <button id="signupBtn" class="btn" style="background:#fff;border:1px solid #ccc;">
          ‡∏™‡∏°‡∏±‡∏Ñ‡∏£
        </button>
      </div>
    </form>

    <div id="msgError" class="error"></div>
    <div id="msgOk" class="success"></div>

    <footer>¬© 2025 ‡∏ú‡∏•‡∏î‡∏µ</footer>
  </div>

  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
    import {
      getAuth,
      GoogleAuthProvider,
      signInWithPopup,
      signInWithRedirect,
      getRedirectResult,
      signInWithEmailAndPassword,
      createUserWithEmailAndPassword,
      updateProfile,
      onAuthStateChanged
    } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";

    /* === Firebase Config === */
    const firebaseConfig = {
      apiKey: "AIzaSyDq60nePWYn2AXt4gkJSqnTlpR84ZfkTUw",
      authDomain: "beneficial-applications.firebaseapp.com",
      projectId: "beneficial-applications",
      storageBucket: "beneficial-applications.firebasestorage.app",
      messagingSenderId: "614255728005",
      appId: "1:614255728005:web:69d167f6033ed3e452e0ec",
      measurementId: "G-N8RKQSHP94"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();
    const $ = s => document.querySelector(s);

    const msgErr = $("#msgError");
    const msgOk  = $("#msgOk");

    function goHome(user) {
      const name = user.displayName || user.email.split("@")[0];
      window.location.href = `Home999.html?name=${encodeURIComponent(name)}`;
    }

    function showErr(e){
      msgErr.textContent = e?.message || "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î";
      msgErr.style.display = "block";
      msgOk.style.display = "none";
      console.error(e);
    }

    function showOk(t){
      msgOk.textContent = t;
      msgOk.style.display = "block";
      msgErr.style.display = "none";
    }

    /* ========== Google Login ========== */
    $("#googleBtn").addEventListener("click", async () => {
      try {
        await signInWithPopup(auth, provider);
      } catch (e) {
        // ‡∏ñ‡πâ‡∏≤ popup fail ‚Üí ‡πÉ‡∏ä‡πâ redirect
        try {
          await signInWithRedirect(auth, provider);
        } catch (e2) { showErr(e2); }
      }
    });

    getRedirectResult(auth).catch(() => {});

    /* ========== Email Login ========== */
    $("#emailForm").addEventListener("submit", async (e)=>{
      e.preventDefault();
      try {
        await signInWithEmailAndPassword(auth, $("#email").value, $("#password").value);
      } catch (e2) { showErr(e2); }
    });

    $("#signupBtn").addEventListener("click", async ()=>{
      try {
        const email = $("#email").value;
        const pass  = $("#password").value;
        const cred = await createUserWithEmailAndPassword(auth, email, pass);
        await updateProfile(cred.user, { displayName: email.split("@")[0] });
        showOk("‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏≤‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Home...");
        goHome(cred.user);
      } catch (e) { showErr(e); }
    });

    onAuthStateChanged(auth, (u)=>{ if(u) goHome(u); });

  </script>
</body>
</html>
