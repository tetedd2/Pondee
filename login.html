<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‡∏ú‡∏•‡∏î‡∏µ ‚Ä¢ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</title>

  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:"Prompt",system-ui,sans-serif;
      background:linear-gradient(160deg,#78e4c7,#4bb8e8);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:22px;
    }
    .card{
      width:100%;
      max-width:430px;
      background:#ffffffcc;
      backdrop-filter:blur(12px);
      border-radius:22px;
      padding:32px;
      box-shadow:0 10px 35px rgba(0,0,0,.15);
      animation:fadein .6s ease;
    }
    @keyframes fadein{
      from{opacity:0;transform:translateY(10px)}
      to{opacity:1;transform:translateY(0)}
    }
    h1{
      font-size:26px;
      font-weight:700;
      color:#003b32;
      margin-bottom:6px;
      text-align:center;
    }
    .sub{
      font-size:15px;
      color:#1f4037;
      margin-bottom:22px;
      text-align:center;
    }
    label{display:block;margin:10px 0 6px;font-weight:600;color:#003b32}
    input{
      width:100%;
      padding:11px 12px;
      border-radius:10px;
      border:1px solid #cfd8dc;
      font-size:14px;
    }
    .btn{
      width:100%;
      padding:12px;
      border-radius:12px;
      border:0;
      cursor:pointer;
      font-size:15px;
      font-weight:600;
      transition:.2s;
    }
    .btn-primary{
      background:#007aff;
      color:#fff;
      margin-top:12px;
    }
    .btn-primary:hover{background:#0066d1}
    .ses-row{
      display:flex;
      gap:12px;
      margin-top:12px;
    }
    .error{
      background:#fdecea;
      border:1px solid #f5c6cb;
      color:#c62828;
      padding:12px;
      margin-top:14px;
      border-radius:10px;
      display:none;
      white-space:pre-line;
      font-size:14px;
    }
    .success{
      background:#e8f5e9;
      border:1px solid #c8e6c9;
      color:#1b5e20;
      padding:12px;
      margin-top:14px;
      border-radius:10px;
      display:none;
      font-size:14px;
    }
    footer{
      margin-top:18px;
      text-align:center;
      font-size:12px;
      color:#003b32;
    }
  </style>
</head>

<body>
  <div class="card">
    <h1>üåø Pondee</h1>
    <p class="sub">
      ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏à‡∏ö<br>
      ‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏ã‡πâ‡∏≥
    </p>

    <form id="emailForm">
      <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
      <input id="email" type="email" placeholder="you@example.com" required>

      <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
      <input id="password" type="password" placeholder="‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß" required>

      <div class="ses-row">
        <button class="btn btn-primary" type="submit">‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô</button>
        <button id="signupBtn" type="button" class="btn" style="background:#fff;border:1px solid #ccc;">
          ‡∏™‡∏°‡∏±‡∏Ñ‡∏£
        </button>
      </div>
    </form>

    <div id="msgError" class="error"></div>
    <div id="msgOk" class="success"></div>

    <footer>‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï‡∏î‡∏µ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà ‡∏ú‡∏•‡∏î‡∏µüå±</footer>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
    import {
      getAuth,
      signInWithEmailAndPassword,
      createUserWithEmailAndPassword,
      updateProfile,
      onAuthStateChanged
    } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDq60nePWYn2AXt4gkJSqnTlpR84ZfkTUw",
      authDomain: "beneficial-applications.firebaseapp.com",
      projectId: "beneficial-applications",
      storageBucket: "beneficial-applications.firebasestorage.app",
      messagingSenderId: "614255728005",
      appId: "1:614255728005:web:69d167f6033ed3e452e0ec"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const $ = s => document.querySelector(s);

    const msgErr = $("#msgError");
    const msgOk  = $("#msgOk");

    function goHome(user){
      const name = user.displayName || user.email.split("@")[0];
      window.location.href = `Home999.html?name=${encodeURIComponent(name)}`;
    }

    function showErr(e){
      msgErr.textContent = e?.message || "‡∏û‡∏±‡∏á‡∏≠‡πà‡∏∞ ‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ó‡∏≥‡πÑ‡∏á‡∏î‡∏µ";
      msgErr.style.display = "block";
      msgOk.style.display = "none";
      console.error(e);
    }

    function showOk(t){
      msgOk.textContent = t;
      msgOk.style.display = "block";
      msgErr.style.display = "none";
    }

    // ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
    $("#emailForm").addEventListener("submit", async (e)=>{
      e.preventDefault();
      try{
        await signInWithEmailAndPassword(
          auth,
          $("#email").value.trim(),
          $("#password").value.trim()
        );
      }catch(err){
        showErr(err);
      }
    });

    // ‡∏™‡∏°‡∏±‡∏Ñ‡∏£
    $("#signupBtn").addEventListener("click", async ()=>{
      try{
        const email = $("#email").value.trim();
        const pass  = $("#password").value.trim();
        if(!email || !pass) throw new Error("‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏°‡∏•‡∏Å‡∏±‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞‡∏Ñ‡πâ‡∏≤‡∏ö");

        const cred = await createUserWithEmailAndPassword(auth, email, pass);
        await updateProfile(cred.user,{
          displayName: email.split("@")[0]
        });

        showOk("‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Home...");
        goHome(cred.user);
      }catch(err){
        showErr(err);
      }
    });

    // ‡∏à‡∏≥ session ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
    onAuthStateChanged(auth,(user)=>{
      if(user) goHome(user);
    });
  </script>
</body>
</html>


